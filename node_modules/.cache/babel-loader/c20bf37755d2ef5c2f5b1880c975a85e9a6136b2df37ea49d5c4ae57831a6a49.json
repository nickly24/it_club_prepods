{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const api='http://localhost:3001/api';export default function AddSchedule(_ref){let{onScheduleAdded}=_ref;const[isFormVisible,setIsFormVisible]=useState(false);const[filials,setFilials]=useState([]);const[selectedFilial,setSelectedFilial]=useState('');const[dayOfWeek,setDayOfWeek]=useState('Понедельник');const[time,setTime]=useState('');const daysOfWeek=[\"Понедельник\",\"Вторник\",\"Среда\",\"Четверг\",\"Пятница\",\"Суббота\",\"Воскресенье\"];useEffect(()=>{const fetchFilials=async()=>{try{const response=await axios.get(\"\".concat(api,\"/filials\"));setFilials(response.data);}catch(error){console.error('Error fetching filials:',error);}};fetchFilials();},[]);const handleSubmit=async e=>{e.preventDefault();try{const response=await axios.post(\"\".concat(api,\"/schedules\"),{day_of_week:dayOfWeek,time,filial_id:selectedFilial});onScheduleAdded(response.data);setIsFormVisible(false);setSelectedFilial('');setDayOfWeek('Понедельник');setTime('');}catch(error){console.error('Error adding schedule:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"add-schedule mt20\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"add-schedule-button\",onClick:()=>setIsFormVisible(!isFormVisible),children:isFormVisible?'Отмена':'Добавить'}),isFormVisible&&/*#__PURE__*/_jsxs(\"form\",{className:\"add-schedule-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid3 mb15\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0421\\u0430\\u0434:\",/*#__PURE__*/_jsxs(\"select\",{className:\"select_form\",value:selectedFilial,onChange:e=>setSelectedFilial(e.target.value),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0441\\u0430\\u0434\"}),filials.map(filial=>/*#__PURE__*/_jsx(\"option\",{value:filial.id,children:filial.name},filial.id))]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0414\\u0435\\u043D\\u044C \\u043D\\u0435\\u0434\\u0435\\u043B\\u0438:\",/*#__PURE__*/_jsx(\"select\",{className:\"select_form\",value:dayOfWeek,onChange:e=>setDayOfWeek(e.target.value),required:true,children:daysOfWeek.map((day,idx)=>/*#__PURE__*/_jsx(\"option\",{value:day,children:day},idx))})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0412\\u0440\\u0435\\u043C\\u044F:\",/*#__PURE__*/_jsx(\"input\",{className:\"select_form\",type:\"time\",value:time,onChange:e=>setTime(e.target.value),required:true})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"form_btn\",type:\"submit\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0440\\u0430\\u0441\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","api","AddSchedule","_ref","onScheduleAdded","isFormVisible","setIsFormVisible","filials","setFilials","selectedFilial","setSelectedFilial","dayOfWeek","setDayOfWeek","time","setTime","daysOfWeek","fetchFilials","response","get","concat","data","error","console","handleSubmit","e","preventDefault","post","day_of_week","filial_id","className","children","onClick","onSubmit","value","onChange","target","required","map","filial","id","name","day","idx","type"],"sources":["/Users/nickly/Desktop/Прога/project7/client/src/modules/AddTable.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst api = 'http://localhost:3001/api';\n\nexport default function AddSchedule({ onScheduleAdded }) {\n  const [isFormVisible, setIsFormVisible] = useState(false);\n  const [filials, setFilials] = useState([]);\n  const [selectedFilial, setSelectedFilial] = useState('');\n  const [dayOfWeek, setDayOfWeek] = useState('Понедельник');\n  const [time, setTime] = useState('');\n\n  const daysOfWeek = [\"Понедельник\", \"Вторник\", \"Среда\", \"Четверг\", \"Пятница\", \"Суббота\", \"Воскресенье\"];\n\n  useEffect(() => {\n    const fetchFilials = async () => {\n      try {\n        const response = await axios.get(`${api}/filials`);\n        setFilials(response.data);\n      } catch (error) {\n        console.error('Error fetching filials:', error);\n      }\n    };\n\n    fetchFilials();\n  }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await axios.post(`${api}/schedules`, {\n        day_of_week: dayOfWeek,\n        time,\n        filial_id: selectedFilial,\n      });\n      onScheduleAdded(response.data);\n      setIsFormVisible(false);\n      setSelectedFilial('');\n      setDayOfWeek('Понедельник');\n      setTime('');\n    } catch (error) {\n      console.error('Error adding schedule:', error);\n    }\n  };\n\n  return (\n    <div className=\"add-schedule mt20\">\n      <button className=\"add-schedule-button\" onClick={() => setIsFormVisible(!isFormVisible)}>\n        {isFormVisible ? 'Отмена' : 'Добавить'}\n      </button>\n      {isFormVisible && (\n        <form className=\"add-schedule-form\" onSubmit={handleSubmit}>\n          <div className='grid3 mb15'>\n            <label>\n              Сад:\n              <select className='select_form' value={selectedFilial} onChange={(e) => setSelectedFilial(e.target.value)} required>\n                <option value=\"\">Выберите сад</option>\n                {filials.map((filial) => (\n                  <option key={filial.id} value={filial.id}>\n                    {filial.name}\n                  </option>\n                ))}\n              </select>\n            </label>\n            <label>\n              День недели:\n              <select className='select_form' value={dayOfWeek} onChange={(e) => setDayOfWeek(e.target.value)} required>\n                {daysOfWeek.map((day, idx) => (\n                  <option key={idx} value={day}>{day}</option>\n                ))}\n              </select>\n            </label>\n            <label>\n              Время:\n              <input className='select_form' type=\"time\" value={time} onChange={(e) => setTime(e.target.value)} required />\n            </label>\n          </div>\n          <button className='form_btn' type=\"submit\">Добавить расписание</button>\n        </form>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}