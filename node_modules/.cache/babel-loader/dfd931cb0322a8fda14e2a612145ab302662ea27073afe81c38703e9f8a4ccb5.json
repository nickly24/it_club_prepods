{"ast":null,"code":"import React,{useEffect,useState}from'react';import{FilialCard}from\"./FilialCard\";import{IoIosRefreshCircle}from\"react-icons/io\";import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const api='http://localhost:3001/api/filials';export default function Filials(){const[kindergartens,setKindergartens]=useState([]);const refreshKindergartens=async()=>{try{const response=await axios.get(api);setKindergartens(response.data);}catch(error){console.error('Error fetching filials:',error);}};const deleteKindergarten=async id=>{try{await axios.delete(\"\".concat(api,\"/\").concat(id));setKindergartens(prevKindergartens=>prevKindergartens.filter(k=>k.id!==id));}catch(error){console.error('Error deleting filial:',error);}};const updateKindergarten=()=>{refreshKindergartens();};useEffect(()=>{refreshKindergartens();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"card_main pd20\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"textright\",children:/*#__PURE__*/_jsx(IoIosRefreshCircle,{onClick:refreshKindergartens,className:\"refresh-icon\"})}),kindergartens.map((kindergarten,index)=>/*#__PURE__*/_jsx(FilialCard,{id:kindergarten.id,name:kindergarten.name,address:kindergarten.address,price:kindergarten.price,metro:kindergarten.metro,color:kindergarten.metro_color,tel:kindergarten.tel,comment:kindergarten.comment,onDelete:deleteKindergarten,onUpdate:updateKindergarten,api:api// Передаем api как пропс\n},index))]});}","map":{"version":3,"names":["React","useEffect","useState","FilialCard","IoIosRefreshCircle","axios","jsx","_jsx","jsxs","_jsxs","api","Filials","kindergartens","setKindergartens","refreshKindergartens","response","get","data","error","console","deleteKindergarten","id","delete","concat","prevKindergartens","filter","k","updateKindergarten","className","children","onClick","map","kindergarten","index","name","address","price","metro","color","metro_color","tel","comment","onDelete","onUpdate"],"sources":["/Users/nickly/Desktop/Прога/project7/client/src/modules/Filials.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { FilialCard } from \"./FilialCard\";\nimport { IoIosRefreshCircle } from \"react-icons/io\";\nimport axios from 'axios';\n\nconst api = 'http://localhost:3001/api/filials';\n\nexport default function Filials() {\n  const [kindergartens, setKindergartens] = useState([]);\n\n  const refreshKindergartens = async () => {\n    try {\n      const response = await axios.get(api);\n      setKindergartens(response.data);\n    } catch (error) {\n      console.error('Error fetching filials:', error);\n    }\n  };\n\n  const deleteKindergarten = async (id) => {\n    try {\n      await axios.delete(`${api}/${id}`);\n      setKindergartens(prevKindergartens => prevKindergartens.filter(k => k.id !== id));\n    } catch (error) {\n      console.error('Error deleting filial:', error);\n    }\n  };\n\n  const updateKindergarten = () => {\n    refreshKindergartens();\n  };\n\n  useEffect(() => {\n    refreshKindergartens();\n  }, []);\n\n  return (\n    <div className='card_main pd20'>\n      <div className='textright'><IoIosRefreshCircle onClick={refreshKindergartens} className=\"refresh-icon\" /></div>\n      {kindergartens.map((kindergarten, index) => (\n        <FilialCard\n          key={index}\n          id={kindergarten.id}\n          name={kindergarten.name}\n          address={kindergarten.address}\n          price={kindergarten.price}\n          metro={kindergarten.metro}\n          color={kindergarten.metro_color}\n          tel={kindergarten.tel}\n          comment={kindergarten.comment}\n          onDelete={deleteKindergarten}\n          onUpdate={updateKindergarten}\n          api={api}  // Передаем api как пропс\n        />\n      ))}\n    </div>\n  );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,UAAU,KAAQ,cAAc,CACzC,OAASC,kBAAkB,KAAQ,gBAAgB,CACnD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,GAAG,CAAG,mCAAmC,CAE/C,cAAe,SAAS,CAAAC,OAAOA,CAAA,CAAG,CAChC,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAEtD,KAAM,CAAAY,oBAAoB,CAAG,KAAAA,CAAA,GAAY,CACvC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAV,KAAK,CAACW,GAAG,CAACN,GAAG,CAAC,CACrCG,gBAAgB,CAACE,QAAQ,CAACE,IAAI,CAAC,CACjC,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CACjD,CACF,CAAC,CAED,KAAM,CAAAE,kBAAkB,CAAG,KAAO,CAAAC,EAAE,EAAK,CACvC,GAAI,CACF,KAAM,CAAAhB,KAAK,CAACiB,MAAM,IAAAC,MAAA,CAAIb,GAAG,MAAAa,MAAA,CAAIF,EAAE,CAAE,CAAC,CAClCR,gBAAgB,CAACW,iBAAiB,EAAIA,iBAAiB,CAACC,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACL,EAAE,GAAKA,EAAE,CAAC,CAAC,CACnF,CAAE,MAAOH,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CACF,CAAC,CAED,KAAM,CAAAS,kBAAkB,CAAGA,CAAA,GAAM,CAC/Bb,oBAAoB,CAAC,CAAC,CACxB,CAAC,CAEDb,SAAS,CAAC,IAAM,CACda,oBAAoB,CAAC,CAAC,CACxB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEL,KAAA,QAAKmB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BtB,IAAA,QAAKqB,SAAS,CAAC,WAAW,CAAAC,QAAA,cAACtB,IAAA,CAACH,kBAAkB,EAAC0B,OAAO,CAAEhB,oBAAqB,CAACc,SAAS,CAAC,cAAc,CAAE,CAAC,CAAK,CAAC,CAC9GhB,aAAa,CAACmB,GAAG,CAAC,CAACC,YAAY,CAAEC,KAAK,gBACrC1B,IAAA,CAACJ,UAAU,EAETkB,EAAE,CAAEW,YAAY,CAACX,EAAG,CACpBa,IAAI,CAAEF,YAAY,CAACE,IAAK,CACxBC,OAAO,CAAEH,YAAY,CAACG,OAAQ,CAC9BC,KAAK,CAAEJ,YAAY,CAACI,KAAM,CAC1BC,KAAK,CAAEL,YAAY,CAACK,KAAM,CAC1BC,KAAK,CAAEN,YAAY,CAACO,WAAY,CAChCC,GAAG,CAAER,YAAY,CAACQ,GAAI,CACtBC,OAAO,CAAET,YAAY,CAACS,OAAQ,CAC9BC,QAAQ,CAAEtB,kBAAmB,CAC7BuB,QAAQ,CAAEhB,kBAAmB,CAC7BjB,GAAG,CAAEA,GAAM;AAAA,EAXNuB,KAYN,CACF,CAAC,EACC,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}